#include "scaler.h"
#include "vdma.h"
#include "xil_printf.h"
#include "sleep.h"
#include "instructionRegister.h"
#include "api.h"
#include "xparameters.h"

int main()
{
	configureScaler();
    configureVdma();



	setColorByPaletteId(0, 0x111111);
	usleep(100);
	setColorByPaletteId(1, 0x555555);
	usleep(100);
	setColorByPaletteId(2, 0x999999);
	usleep(100);
	setColorByPaletteId(3, 0xEEEEEE);
	usleep(100);
	setColorByPaletteId(4, 0x0);
	usleep(100);
	setColorByPaletteId(5, 0x0);
	usleep(100);
	setColorByPaletteId(6, 0x0);
	usleep(100);
	setColorByPaletteId(7, 0x0);
	usleep(100);
	setColorByPaletteId(8, 0x0);
	usleep(100);
	setColorByPaletteId(9, 0x0);
	usleep(100);
	setColorByPaletteId(10, 0x0);
	usleep(100);
	setColorByPaletteId(11, 0xFF0000);
	usleep(100);
	setColorByPaletteId(12, 0x444);
	usleep(100);
	setColorByPaletteId(13, 0x888);
	usleep(100);
	setColorByPaletteId(14, 0xCCC);
	usleep(100);
	setColorByPaletteId(15, 0xFFF);
	usleep(100);


    for(int i = 0 ; i < 4; i++)
    {
    	for(int x = 0 ; x < 16; x++)
    	{
    		for(int y = 0 ; y < 16; y++)
    		{
    			setPaletteIdForTileId2(i, i, x, y);
    			if(y >= 8)
    			{
        			setPaletteIdForTileId2(i, i+12, x, y);
    			}
    			if(x >= 8)
    			{
    				setPaletteIdForTileId2(i, i+12, x, y);
    			}
    			if(x == 16)
    			{
    				setPaletteIdForTileId2(i, 11, x, y);
    			}
    			if(y == 16)
    			{
    				setPaletteIdForTileId2(i, 11, x, y);
    			}

    			usleep(100);
    		}
    	}

    }

    for(int x = 0 ; x < 8; x++)
    {
    	for(int y = 0; y < 8; y++)
    	{
    		setTileCoordBackground(x % 4, x, y);
    		usleep(100);
    	}
    }

    while(1)
    {
    	sleep(1);
    }
    return 0;
}
